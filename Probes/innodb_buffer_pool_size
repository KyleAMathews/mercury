#!/bin/bash
#If you wish to replace our default value for innode buffer pool size in /etc/mysql/my.cnf,
#edit the INNODB_BUFFER_POOL_SIZE variable in /etc/mercury/tuneable_configs

if [[ -a /etc/mercury/tuneable_configs ]]; then
. /etc/mercury/tuneable_configs
fi

RAM=`grep MemTotal /proc/meminfo | sed 's/[^0-9]*//g'`

if [[ -n "$INNODB_BUFFER_POOL_SIZE" ]]; then
   echo "$INNODB_BUFFER_POOL_SIZE"
elif (($RAM>=8000000)); then
    echo "2048"
elif (($RAM>=4000000)); then
    echo "1024"
elif (($RAM>=2000000)); then
    echo "512"
elif (($RAM>=1000000)); then
    echo "256"
else
    echo "128"
fi


